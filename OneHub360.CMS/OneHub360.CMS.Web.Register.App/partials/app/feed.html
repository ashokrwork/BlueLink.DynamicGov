<div ng-controller="feedController" ng-init="LoadFeeds(false)" ng-if="isLoggedIn">
    <div ng-if="status == 0">
        <loading></loading>
    </div>
    <button data-toggle="collapse" data-target="#filterArea" class="btn btn-default filterBtn "> <i class="fa fa-filter" aria-hidden="true"></i> </button>
    <div id="filterArea" class="collapse col-md-12">
        <div class="filterBox">
            <div class="col-md-1">
                <select ng-model="filteroption.filtertype" class="form-control">
                    <option value="All" selected="selected">الكل</option>
                    <option value="Internal"> كتاب داخلي</option>
                    <option value="External"> كتاب خارجي </option>
                </select>
            </div>
            <div class="col-md-2">
                <people-Picker title="مرسل من"
                               selectedobject="filteroption.Fromuserobject"
                               pickerid="Fromuserobject"
                               required="true"></people-Picker>
            </div>
            <div class="col-md-2" ng-hide="filteroption.filtertype!='Internal'">
                <peoplepicker-Current title="مرسل إلي"
                                      selectedobject="filteroption.Touserobject"
                                      pickerid="Touserobject"
                                      reuired="true"></peoplepicker-Current>
            </div>
            <div class="col-md-2" ng-hide="filteroption.filtertype!='External'">
                <external-Units-Picker title="الرجاء إختيار جهة"
                                       selectedobject="filteroption.Touserobject"
                                       pickerid="Touserobject"
                                       reuired="true"></external-Units-Picker>
            </div>
            <div class="col-md-2">
                <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-calendar fa-fw"></i></span>
                    <input ng-required="true" class="form-control datepicker" ng-model="filteroption.Fromdate" placeholder="ليس قبل">
                </div>
            </div>
            <div class="col-md-2 col-xs-12">
                <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-calendar fa-fw"></i></span>
                    <input ng-required="true" class="form-control datepicker" ng-model="filteroption.Todate" placeholder="ليس بعد">
                </div>
            </div>
            <div class="col-md-1 ">

                <select ng-model="filteroption.statustext" class="form-control">
                    <option value="new" selected="selected">جديد</option>
                    <option value="completed">منتهي</option>
                </select>
                <!--<input ng-required="true" class="form-control datepicker" ng-model="filteroption.Todate" placeholder="ليس بعد">-->


            </div>
            <div class="col-md-1 col-sm-2 col-xs-6">
                <button ng-disabled="status == 0" type="button" ng-click="filter()" class="btn  greenBtn"><i class="fa fa-filter fa-fw"></i>بحث</button>
            </div><div class="col-md-1 col-sm-2 col-xs-6">
                <button ng-disabled="status == 0" type="button" ng-click="reset()" class="btn  btn-default"><i class="fa fa-filter fa-fw"></i>إالغاء</button>

            </div>
        </div>
    </div>
    <div style="width:100%;text-align:center" ng-if="noData">
        <h3>لا يوجد بيانات للعرض</h3>
    </div>
    
    <div class="TimeLineBox">
        <div ng-if="status == 1">
            <div ng-repeat="(category, feeds) in feedData | map: map | groupBy: 'Category'">

                <div class="timeLin_date {{category}}" ng-click="SlideCategory($event,category)">
                    <i class="fa fa-calendar fa-lg"></i>
                    <b> ( {{feeds.length}} ) </b><i ng-click="LoadFeeds(true)" ng-if="$index == 0" class="fa fa-refresh fa-lg"> تحميل </i>
                </div>
                <content>
                    <div ng-repeat="feedItemData in feeds">
                        <div template="{{feedItemData.TemplateUrl}}" feeditem></div>
                    </div>
                </content>
            </div>
            <div ng-show="pagecount>0">
                <span  ng-repeat="page in Pages">
                    <input  class="btn loginBtn" type="button" value="{{page}}" ng-click="Getnextpage(page)" />
                </span>
            </div>
            <!--<div ng-if="feedData.length == 0">
                لا يوجد محتوي للعرض<br />
                من فضلك قم بإنشاء محتوي جديد
                <br />
                <ul ng-controller="newItemStripController">
                    <div ng-if="status == 0">
                        Loading....
                    </div>
                    <div ng-if="status == 1" ng-repeat="feedTypeData in feedData track by $index">
                        <a class="btn-floating" data-backdrop="false" data-toggle="modal" href="{{feedTypeData.NewFormUrl}}" data-target="#oneHub360ModalContainer"><i class="{{feedTypeData.NewStripImageUrl}}"></i></a>
                        <br />
                    </div>
                </ul>
            </div>-->
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $(".datepicker").datepicker();
    });
</script>